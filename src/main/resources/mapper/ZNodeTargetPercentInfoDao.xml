<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.haier.hailian.contract.dao.ZNodeTargetPercentInfoDao">

    <resultMap type="com.haier.hailian.contract.entity.ZNodeTargetPercentInfo" id="ZNodeTargetPercentInfoMap">
        <result property="id" column="id" jdbcType="INTEGER"/>
        <result property="lqId" column="lq_id" jdbcType="INTEGER"/>
        <result property="nodecode" column="nodeCode" jdbcType="VARCHAR"/>
        <result property="nodename" column="nodeName" jdbcType="VARCHAR"/>
        <result property="empcode" column="empCode" jdbcType="VARCHAR"/>
        <result property="empname" column="empName" jdbcType="VARCHAR"/>
        <result property="xwcode" column="xwCode" jdbcType="VARCHAR"/>
        <result property="xwname" column="xwName" jdbcType="VARCHAR"/>
        <result property="targetcode" column="targetCode" jdbcType="VARCHAR"/>
        <result property="targetname" column="targetName" jdbcType="VARCHAR"/>
        <result property="targetline" column="targetLine" jdbcType="VARCHAR"/>
        <result property="sharepercent" column="sharePercent" jdbcType="VARCHAR"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="ZNodeTargetPercentInfoMap">
        select
          id, lq_id, nodeCode, nodeName, empCode, empName, xwCode, xwName, targetCode, targetName, targetLine, sharePercent
        from chain_contract.z_node_target_percent_info
        where id = #{id}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="ZNodeTargetPercentInfoMap">
        select
          id, lq_id, nodeCode, nodeName, empCode, empName, xwCode, xwName, targetCode, targetName, targetLine, sharePercent
        from chain_contract.z_node_target_percent_info
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="ZNodeTargetPercentInfoMap">
        select
          id, lq_id, nodeCode, nodeName, empCode, empName, xwCode, xwName, targetCode, targetName, targetLine, sharePercent
        from chain_contract.z_node_target_percent_info
        <where>
            <if test="id != null">
                and id = #{id}
            </if>
            <if test="lqId != null">
                and lq_id = #{lqId}
            </if>
            <if test="nodecode != null and nodecode != ''">
                and nodeCode = #{nodecode}
            </if>
            <if test="nodename != null and nodename != ''">
                and nodeName = #{nodename}
            </if>
            <if test="empcode != null and empcode != ''">
                and empCode = #{empcode}
            </if>
            <if test="empname != null and empname != ''">
                and empName = #{empname}
            </if>
            <if test="xwcode != null and xwcode != ''">
                and xwCode = #{xwcode}
            </if>
            <if test="xwname != null and xwname != ''">
                and xwName = #{xwname}
            </if>
            <if test="targetcode != null and targetcode != ''">
                and targetCode = #{targetcode}
            </if>
            <if test="targetname != null and targetname != ''">
                and targetName = #{targetname}
            </if>
            <if test="targetline != null and targetline != ''">
                and targetLine = #{targetline}
            </if>
            <if test="sharepercent != null and sharepercent != ''">
                and sharePercent = #{sharepercent}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
        insert into chain_contract.z_node_target_percent_info(lq_id, nodeCode, nodeName, empCode, empName, xwCode, xwName, targetCode, targetName, targetLine, sharePercent)
        values (#{lqId}, #{nodecode}, #{nodename}, #{empcode}, #{empname}, #{xwcode}, #{xwname}, #{targetcode}, #{targetname}, #{targetline}, #{sharepercent})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update chain_contract.z_node_target_percent_info
        <set>
            <if test="lqId != null">
                lq_id = #{lqId},
            </if>
            <if test="nodecode != null and nodecode != ''">
                nodeCode = #{nodecode},
            </if>
            <if test="nodename != null and nodename != ''">
                nodeName = #{nodename},
            </if>
            <if test="empcode != null and empcode != ''">
                empCode = #{empcode},
            </if>
            <if test="empname != null and empname != ''">
                empName = #{empname},
            </if>
            <if test="xwcode != null and xwcode != ''">
                xwCode = #{xwcode},
            </if>
            <if test="xwname != null and xwname != ''">
                xwName = #{xwname},
            </if>
            <if test="targetcode != null and targetcode != ''">
                targetCode = #{targetcode},
            </if>
            <if test="targetname != null and targetname != ''">
                targetName = #{targetname},
            </if>
            <if test="targetline != null and targetline != ''">
                targetLine = #{targetline},
            </if>
            <if test="sharepercent != null and sharepercent != ''">
                sharePercent = #{sharepercent},
            </if>
        </set>
        where id = #{id}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from chain_contract.z_node_target_percent_info where id = #{id}
    </delete>



    <!--通过实体作为筛选条件查询-->
    <select id="queryByKeyWorld" resultMap="ZNodeTargetPercentInfoMap">

        select * from sys_node_ehr sne
        left join z_share_percent zsp  on zsp.xw_code = sne.nodeCode
        where  zsp.period_code='201912'
        and nodeManagerCode in (00552486)
    </select>

</mapper>